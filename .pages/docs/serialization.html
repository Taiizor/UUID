<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Serialization - UUID Documentation</title>
    <link rel="shortcut icon" href="../favicon.ico" />
    <link rel="stylesheet" href="../assets/css/style.css">
    <link rel="icon" type="image/x-icon" href="../favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/themes/prism-tomorrow.min.css">
</head>

<body class="dark-mode">
    <button class="menu-toggle">
        <i class="fas fa-bars"></i>
    </button>
    <nav class="sidebar">
        <div class="sidebar-header">
            <a href="../index.html">
                <img src="../assets/img/Logo.svg" alt="UUID Logo" class="logo">
                <h1>UUID</h1>
            </a>
        </div>
        <ul class="nav-links">
            <li><a href="../index.html"><i class="fas fa-home"></i> Home</a></li>
            <li><a href="getting-started.html"><i class="fas fa-rocket"></i> Getting Started</a></li>
            <li><a href="api-reference.html"><i class="fas fa-book"></i> API Reference</a></li>
            <li><a href="examples.html"><i class="fas fa-code"></i> Examples</a></li>
            <li><a href="serialization.html" class="active"><i class="fas fa-random"></i> Serialization</a></li>
            <li><a href="performance.html"><i class="fas fa-tachometer-alt"></i> Performance</a></li>
            <li><a href="security.html"><i class="fas fa-shield-alt"></i> Security</a></li>
            <li><a href="migration.html"><i class="fas fa-exchange-alt"></i> Migration</a></li>
            <li><a href="faq.html"><i class="fas fa-question-circle"></i> FAQ</a></li>
        </ul>
        <div class="social-links fixed">
            <a href="https://github.com/Taiizor/UUID" target="_blank"><i class="fab fa-github"></i></a>
            <a href="https://discord.gg/nxG977byXb" target="_blank"><i class="fab fa-discord"></i></a>
            <a href="https://stackoverflow.com/questions/tagged/uuid" target="_blank"><i class="fab fa-stack-overflow"></i></a>
        </div>
    </nav>

    <main class="content">
        <h1>Serialization Examples</h1>

        <section id="installation">
            <h2>Installation</h2>

            <div class="example-card">
                <h3>System.Text.Json Package</h3>
                <div class="code-block">
                    <pre><code class="language-bash">dotnet add package UUID.Serialization.System</code></pre>
                </div>
                <p>Install the System.Text.Json serialization package via NuGet.</p>
            </div>

            <div class="example-card">
                <h3>Newtonsoft.Json Package</h3>
                <div class="code-block">
                    <pre><code class="language-bash">dotnet add package UUID.Serialization.Newtonsoft</code></pre>
                </div>
                <p>Install the Newtonsoft.Json serialization package via NuGet.</p>
            </div>
        </section>

        <section id="system-text-json">
            <h2>System.Text.Json Examples</h2>

            <div class="example-card">
                <h3>Basic Serialization</h3>
                <div class="code-block">
                    <pre><code class="language-csharp">using System.Text.Json;

// Configure JsonSerializerOptions
var options = new JsonSerializerOptions();
options.Converters.Add(new UUIDConverter());

// Create a UUID
var uuid = UUID.New();

// Serialize
string json = JsonSerializer.Serialize(uuid, options);

// Deserialize
UUID deserialized = JsonSerializer.Deserialize<UUID>(json, options);</code></pre>
                </div>
                <p>Basic example of UUID serialization and deserialization using System.Text.Json.</p>
            </div>

            <div class="example-card">
                <h3>Collection Serialization</h3>
                <div class="code-block">
                    <pre><code class="language-csharp">// Create an array of UUIDs
UUID[] uuids = new[] { UUID.New(), UUID.New(), UUID.New() };

// Serialize array
string jsonArray = JsonSerializer.Serialize(uuids, options);

// Deserialize array
UUID[] deserializedArray = JsonSerializer.Deserialize<UUID[]>(jsonArray, options);</code></pre>
                </div>
                <p>Example of serializing and deserializing arrays of UUIDs using System.Text.Json.</p>
            </div>

            <div class="example-card">
                <h3>Model Serialization</h3>
                <div class="code-block">
                    <pre><code class="language-csharp">public class User
{
    public UUID Id { get; set; }
    public string Name { get; set; }
}

var user = new User 
{ 
    Id = UUID.New(),
    Name = "John Doe"
};

// Serialize model
string json = JsonSerializer.Serialize(user, options);

// Deserialize model
User deserializedUser = JsonSerializer.Deserialize<User>(json, options);</code></pre>
                </div>
                <p>Example of using UUIDs in model classes with System.Text.Json serialization.</p>
            </div>
        </section>

        <section id="newtonsoft-json">
            <h2>Newtonsoft.Json Examples</h2>

            <div class="example-card">
                <h3>Basic Serialization</h3>
                <div class="code-block">
                    <pre><code class="language-csharp">using Newtonsoft.Json;

// Configure JsonSerializerSettings
var settings = new JsonSerializerSettings();
settings.Converters.Add(new UUIDConverter());

// Create a UUID
var uuid = UUID.New();

// Serialize
string json = JsonConvert.SerializeObject(uuid, settings);

// Deserialize
UUID deserialized = JsonConvert.DeserializeObject<UUID>(json, settings);</code></pre>
                </div>
                <p>Basic example of UUID serialization and deserialization using Newtonsoft.Json.</p>
            </div>

            <div class="example-card">
                <h3>Collection Serialization</h3>
                <div class="code-block">
                    <pre><code class="language-csharp">// Create an array of UUIDs
UUID[] uuids = new[] { UUID.New(), UUID.New(), UUID.New() };

// Serialize array
string jsonArray = JsonConvert.SerializeObject(uuids, settings);

// Deserialize array
UUID[] deserializedArray = JsonConvert.DeserializeObject<UUID[]>(jsonArray, settings);</code></pre>
                </div>
                <p>Example of serializing and deserializing arrays of UUIDs using Newtonsoft.Json.</p>
            </div>

            <div class="example-card">
                <h3>Model Serialization</h3>
                <div class="code-block">
                    <pre><code class="language-csharp">public class User
{
    public UUID Id { get; set; }
    public string Name { get; set; }
}

var user = new User 
{ 
    Id = UUID.New(),
    Name = "John Doe"
};

// Serialize model
string json = JsonConvert.SerializeObject(user, settings);

// Deserialize model
User deserializedUser = JsonConvert.DeserializeObject<User>(json, settings);</code></pre>
                </div>
                <p>Example of using UUIDs in model classes with Newtonsoft.Json serialization.</p>
            </div>
        </section>

        <section id="advanced-examples">
            <h2>Advanced Examples</h2>

            <div class="example-card">
                <h3>Custom Model with UUID List</h3>
                <div class="code-block">
                    <pre><code class="language-csharp">public class Team
{
    public string Name { get; set; }
    public List<UUID> MemberIds { get; set; }
}

var team = new Team 
{ 
    Name = "Development Team",
    MemberIds = new List<UUID> 
    { 
        UUID.New(), 
        UUID.New() 
    }
};

// System.Text.Json
string json = JsonSerializer.Serialize(team, options);
Team deserializedTeam = JsonSerializer.Deserialize<Team>(json, options);

// Newtonsoft.Json
string json = JsonConvert.SerializeObject(team, settings);
Team deserializedTeam = JsonConvert.DeserializeObject<Team>(json, settings);</code></pre>
                </div>
                <p>Example of serializing a model containing a list of UUIDs.</p>
            </div>

            <div class="example-card">
                <h3>Dictionary with UUID Keys</h3>
                <div class="code-block">
                    <pre><code class="language-csharp">// Create a dictionary with UUID keys
Dictionary<UUID, string> userNames = new()
{
    { UUID.New(), "John Doe" },
    { UUID.New(), "Jane Smith" }
};

// System.Text.Json
string json = JsonSerializer.Serialize(userNames, options);
Dictionary<UUID, string> deserializedDict = JsonSerializer.Deserialize<Dictionary<UUID, string>>(json, options);

// Newtonsoft.Json
string json = JsonConvert.SerializeObject(userNames, settings);
Dictionary<UUID, string> deserializedDict = JsonConvert.DeserializeObject<Dictionary<UUID, string>>(json, settings);</code></pre>
                </div>
                <p>Example of using UUIDs as dictionary keys in serialization.</p>
            </div>

            <div class="example-card">
                <h3>Custom JSON Property Name</h3>
                <div class="code-block">
                    <pre><code class="language-csharp">public class UserProfile
{
    [JsonPropertyName("user_id")]        // System.Text.Json
    [JsonProperty("user_id")]            // Newtonsoft.Json
    public UUID Id { get; set; }

    [JsonPropertyName("display_name")]    // System.Text.Json
    [JsonProperty("display_name")]        // Newtonsoft.Json
    public string Name { get; set; }
}

var profile = new UserProfile 
{ 
    Id = UUID.New(),
    Name = "John Doe"
};

// The serialized JSON will use the custom property names:
// {
//   "user_id": "...",
//   "display_name": "John Doe"
// }</code></pre>
                </div>
                <p>Example of customizing JSON property names when serializing UUIDs.</p>
            </div>

            <div class="example-card">
                <h3>Nullable UUID Properties</h3>
                <div class="code-block">
                    <pre><code class="language-csharp">public class Document
{
    public UUID Id { get; set; }
    public UUID? ParentId { get; set; }    // Nullable UUID
    public string Title { get; set; }
}

var document = new Document 
{ 
    Id = UUID.New(),
    ParentId = null,        // This will be serialized as null
    Title = "My Document"
};

// System.Text.Json
string json = JsonSerializer.Serialize(document, options);
Document deserializedDoc = JsonSerializer.Deserialize<Document>(json, options);

// Newtonsoft.Json
string json = JsonConvert.SerializeObject(document, settings);
Document deserializedDoc = JsonConvert.DeserializeObject<Document>(json, settings);</code></pre>
                </div>
                <p>Example of working with nullable UUID properties in models.</p>
            </div>
        </section>

        <section id="best-practices">
            <h2>Best Practices</h2>

            <div class="example-card">
                <h3>Global Serializer Configuration</h3>
                <div class="code-block">
                    <pre><code class="language-csharp">// System.Text.Json in ASP.NET Core
public void ConfigureServices(IServiceCollection services)
{
    services.AddControllers()
            .AddJsonOptions(options =>
            {
                options.JsonSerializerOptions.Converters.Add(new UUIDConverter());
            });
}

// Newtonsoft.Json in ASP.NET Core
public void ConfigureServices(IServiceCollection services)
{
    services.AddControllers()
            .AddNewtonsoftJson(options =>
            {
                options.SerializerSettings.Converters.Add(new UUIDConverter());
            });</code></pre>
                </div>
                <p>Example of configuring UUID serialization globally in an ASP.NET Core application.</p>
            </div>

            <div class="example-card">
                <h3>Custom Serialization Format</h3>
                <div class="code-block">
                    <pre><code class="language-csharp">public class CustomUUIDConverter : JsonConverter<UUID>
{
    public override UUID Read(ref Utf8JsonReader reader, Type typeToConvert, JsonSerializerOptions options)
    {
        string value = reader.GetString();
        return value != null ? UUID.Parse($"prefix_{value}") : default;
    }

    public override void Write(Utf8JsonWriter writer, UUID value, JsonSerializerOptions options)
    {
        writer.WriteStringValue($"prefix_{value}");
    }
}</code></pre>
                </div>
                <p>Example of implementing a custom UUID converter with a specific format.</p>
            </div>
        </section>

        <section id="error-handling">
            <h2>Error Handling Examples</h2>

            <div class="example-card">
                <h3>System.Text.Json Error Handling</h3>
                <div class="code-block">
                    <pre><code class="language-csharp">try
{
    // Invalid JSON string
    string invalidJson = "\"invalid-uuid-format\"";
    
    // This will throw an exception
    UUID uuid = JsonSerializer.Deserialize<UUID>(invalidJson, options);
}
catch (JsonException ex)
{
    Console.WriteLine($"Failed to deserialize UUID: {ex.Message}");
}</code></pre>
                </div>
                <p>Example of handling invalid UUID deserialization with System.Text.Json.</p>
            </div>

            <div class="example-card">
                <h3>Newtonsoft.Json Error Handling</h3>
                <div class="code-block">
                    <pre><code class="language-csharp">try
{
    // Invalid JSON string
    string invalidJson = "\"invalid-uuid-format\"";
    
    // This will throw an exception
    UUID uuid = JsonConvert.DeserializeObject<UUID>(invalidJson, settings);
}
catch (JsonReaderException ex)
{
    Console.WriteLine($"Failed to deserialize UUID: {ex.Message}");
}</code></pre>
                </div>
                <p>Example of handling invalid UUID deserialization with Newtonsoft.Json.</p>
            </div>
        </section>
    </main>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/components/prism-csharp.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/components/prism-sql.min.js"></script>
    <script src="../assets/js/main.js"></script>
    <script src="../assets/js/scroll.js"></script>

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-VZ7CHQBKF6"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-VZ7CHQBKF6');
    </script>

    <!--<script>
        (function(w, d, s, l, i) {
            w[l] = w[l] || [];
            w[l].push({
                'gtm.start': new Date().getTime(),
                event: 'gtm.js'
            });
            var f = d.getElementsByTagName(s)[0],
                j = d.createElement(s),
                dl = l != 'dataLayer' ? '&l=' + l : '';
            j.async = true;
            j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
            f.parentNode.insertBefore(j, f);
        })(window, document, 'script', 'dataLayer', 'G-VZ7CHQBKF6');
    </script>-->

    <!--<noscript>
        <iframe src="https://www.googletagmanager.com/ns.html?id=G-VZ7CHQBKF6" height="0" width="0" style="display:none;visibility:hidden"></iframe>
    </noscript>-->
    <!-- Google tag (gtag.js) -->

    <!-- Yandex.Metrika counter -->
    <script type="text/javascript">
        (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
        m[i].l=1*new Date();
        for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
        k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
        (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

        ym(99213732, "init", {
            webvisor: true,
            clickmap: true,
            trackLinks: true,
            accurateTrackBounce: true
        });
    </script>
    <noscript>
        <div>
            <img src="https://mc.yandex.ru/watch/99213732" style="position:absolute; left:-9999px;" alt="Yandex Metrika" />
        </div>
    </noscript>
    <!-- Yandex.Metrika counter -->
</body>

</html>